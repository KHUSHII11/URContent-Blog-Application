<% include ./partials/header.ejs %>
    <div class="profile w-full min-h-screen bg-zinc-100 pt-1">
        <form id="uploadform" hidden action="/fileupload" method="post" enctype="multipart/form-data">
            <input type="file" name="image">
        </form>
        <div class="profdets flex flex-col items-center bg-zinc-200">
            <div class="relative"> 
                <span id="uploadicon" class="w-8 h-8s absolute bottom-0 right-0 flex items-center justify-center rounded-full bg-zinc-300">
                    <i class="ri-pencil-fill"></i>
                </span>
                <div class="mt-5 w-40 h-40 bg-zinc-100 rounded-full overflow-hidden">
                    <img class="w-full h-full object-cover" src="/images/uploads/<%= user.profileImage %>" alt="no image">
                </div>
            </div>
            <h1 class="text-3xl font-semibold text-black"> <%=user.username %> </h1>
            <h3 class="text-md font-semibold"> <%= user.email %> </h3> 
            
            <br> 
            <a href="/add" class="px-12 py-2 mb-5 bg-purple-900 font-semibold rounded-full text-s text-white"> New blog </a>
            <a href="/show/allposts" class="px-14 py-2 mb-5 bg-purple-900 font-semibold rounded-full text-s text-white"> All blogs [<%= user.posts.length %>] </a>
            
        </div>
        <div class="cards flex flex-wrap gap-10 px-10 mt-5 ml-20">
            <% user.posts.forEach(function(elem){ %>
            <div class="card w-96 h-64 bg-zinc-200">
                <div class="w-80 h-48 mx-8 mt-5 overflow-hidden align-items: center">
                    <a href="/show/<%= elem.id %>"><img class="w-full h-full rounded-md object-cover" 
                    src='/images/uploads/<%= elem.image %>' alt=""></a>
                </div>
                <div class="w-96 mt-2 bg-zinc-200 overflow-hidden">
                    <a href="/show/<%= elem.id %>" class="block text-xl mt-2 mb-2 mx-2 font-bold text-black-600">
                        <%= elem.caption %>
                    </a>
                </div>
            </div>
            <% }) %>
        </div>
    </div>
    <script>
        document.querySelector("#uploadicon").addEventListener('click', function() {
            document.querySelector("#uploadform input").click();
        })
        document.querySelector("#uploadform input").addEventListener('change', function() {
            document.querySelector("#uploadform").submit();
        })
    </script>
<% include ./partials/footer.ejs %>